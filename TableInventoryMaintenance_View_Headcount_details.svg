<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="759px" preserveAspectRatio="none" style="width:2954px;height:759px;" version="1.1" viewBox="0 0 2954 759" width="2954px" zoomAndPan="magnify"><defs><filter height="300%" id="fynp822icp1d9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="744.8984" style="stroke: #A80036; stroke-width: 1.0;" width="968.5" x="713" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="1114.25" y="17.4951">gems-inventory-composite</text><rect fill="#DDDDDD" height="744.8984" style="stroke: #A80036; stroke-width: 1.0;" width="462" x="1683.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="1866" y="17.4951">gems-inventory</text><rect fill="#DDDDDD" height="744.8984" style="stroke: #A80036; stroke-width: 1.0;" width="551" x="2147.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="2381.5" y="17.4951">gems-activity</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="299" x2="299" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="820" x2="820" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1070.5" x2="1070.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1616.5" x2="1616.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1787.5" x2="1787.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2019.5" x2="2019.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2207.5" x2="2207.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2394.5" x2="2394.5" y1="73.9609" y2="696.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2610.5" x2="2610.5" y1="73.9609" y2="696.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="270" y="70.8848">frontend</text><path d="M279,28.3516 L279,52.3516 M279,40.3516 L296,40.3516 " fill="none" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="308" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="270" y="709.8223">frontend</text><path d="M279,716.8984 L279,740.8984 M279,728.8984 L296,728.8984 " fill="none" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="308" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="201" x="717" y="70.8848">InventoryMaintenanceController</text><ellipse cx="820.5" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="816.5,28.3516,822.5,23.3516,820.5,28.3516,822.5,33.3516,816.5,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="201" x="717" y="709.8223">InventoryMaintenanceController</text><ellipse cx="820.5" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="816.5,716.8984,822.5,711.8984,820.5,716.8984,822.5,721.8984,816.5,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="1002.5" y="70.8848">InventoryServiceImpl</text><ellipse cx="1070.5" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1066.5,28.3516,1072.5,23.3516,1070.5,28.3516,1072.5,33.3516,1066.5,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="1002.5" y="709.8223">InventoryServiceImpl</text><ellipse cx="1070.5" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1066.5,716.8984,1072.5,711.8984,1070.5,716.8984,1072.5,721.8984,1066.5,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1555.5" y="70.8848">ActivityServiceImpl</text><ellipse cx="1616.5" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1612.5,28.3516,1618.5,23.3516,1616.5,28.3516,1618.5,33.3516,1612.5,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1555.5" y="709.8223">ActivityServiceImpl</text><ellipse cx="1616.5" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1612.5,716.8984,1618.5,711.8984,1616.5,716.8984,1618.5,721.8984,1612.5,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="1687.5" y="70.8848">InventoryTransactionController</text><ellipse cx="1788" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1784,28.3516,1790,23.3516,1788,28.3516,1790,33.3516,1784,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="1687.5" y="709.8223">InventoryTransactionController</text><ellipse cx="1788" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1784,716.8984,1790,711.8984,1788,716.8984,1790,721.8984,1784,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="237" x="1898.5" y="70.8848">InventoryTransactionDetailRepository</text><ellipse cx="2020" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2016,28.3516,2022,23.3516,2020,28.3516,2022,33.3516,2016,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="237" x="1898.5" y="709.8223">InventoryTransactionDetailRepository</text><ellipse cx="2020" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2016,716.8984,2022,711.8984,2020,716.8984,2022,721.8984,2016,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="2151.5" y="70.8848">ActivityController</text><ellipse cx="2207.5" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2203.5,28.3516,2209.5,23.3516,2207.5,28.3516,2209.5,33.3516,2203.5,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="2151.5" y="709.8223">ActivityController</text><ellipse cx="2207.5" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2203.5,716.8984,2209.5,711.8984,2207.5,716.8984,2209.5,721.8984,2203.5,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="237" x="2273.5" y="70.8848">ActivitySessionTransactionRepository</text><ellipse cx="2395" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2391,28.3516,2397,23.3516,2395,28.3516,2397,33.3516,2391,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="237" x="2273.5" y="709.8223">ActivitySessionTransactionRepository</text><ellipse cx="2395" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2391,716.8984,2397,711.8984,2395,716.8984,2397,721.8984,2391,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="2526.5" y="70.8848">ActivitySessionRepository</text><ellipse cx="2610.5" cy="40.3516" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2606.5,28.3516,2612.5,23.3516,2610.5,28.3516,2612.5,33.3516,2606.5,28.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="2526.5" y="709.8223">ActivitySessionRepository</text><ellipse cx="2610.5" cy="728.8984" fill="#FEFECE" filter="url(#fynp822icp1d9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2606.5,716.8984,2612.5,711.8984,2610.5,716.8984,2612.5,721.8984,2606.5,716.8984" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="808.5,115.1367,818.5,119.1367,808.5,123.1367,812.5,119.1367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="814.5" y1="119.1367" y2="119.1367"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="497" x="306.5" y="114.6318">api/tgames/v1/inventory/inventoryMaintenance/tableInventory/headcount/{transactionId}</text><path d="M8,88.9609 L8,130.9609 L291,130.9609 L291,98.9609 L281,88.9609 L8,88.9609 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M281,88.9609 L281,98.9609 L291,98.9609 L281,88.9609 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="14" y="107.4561">Menu -&gt; Executive Information Menu</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="14" y="123.8076">-&gt; Table Inventory Maintenance -&gt; Headcount</text><polygon fill="#A80036" points="1058.5,158.6641,1068.5,162.6641,1058.5,166.6641,1062.5,162.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="820.5" x2="1064.5" y1="162.6641" y2="162.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="827.5" y="158.1592">findTableTransactionById(transactionId)</text><polygon fill="#A80036" points="1776,189.0156,1786,193.0156,1776,197.0156,1780,193.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1070.5" x2="1782" y1="193.0156" y2="193.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="1077.5" y="188.5107">/inventory/api/inventoryTransactions/{transactionId}</text><polygon fill="#A80036" points="2008,224.3672,2018,228.3672,2008,232.3672,2012,228.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1788" x2="2014" y1="228.3672" y2="228.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1795" y="223.8623">findOnePT(transactionId)</text><path d="M2025,206.3672 L2025,232.3672 L2384,232.3672 L2384,216.3672 L2374,206.3672 L2025,206.3672 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2374,206.3672 L2374,216.3672 L2384,216.3672 L2374,206.3672 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="2031" y="224.8623">根据transactionId从表chips_inventory_transaction获取数据</text><polygon fill="#A80036" points="1081.5,259.7188,1071.5,263.7188,1081.5,267.7188,1077.5,263.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1075.5" x2="2019" y1="263.7188" y2="263.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="1087.5" y="259.2139">return GamingTableTransactionEntity</text><polygon fill="#A80036" points="831.5,290.0703,821.5,294.0703,831.5,298.0703,827.5,294.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="1069.5" y1="294.0703" y2="294.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="837.5" y="289.5654">return GamingTableTransactionEntity</text><polygon fill="#A80036" points="1604.5,325.4219,1614.5,329.4219,1604.5,333.4219,1608.5,329.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="820.5" x2="1610.5" y1="329.4219" y2="329.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="772" x="827.5" y="324.917">if (GamingTableTransactionEntity.getActivitySessionTransactionId()!=null)findActivitySessionTransaction(ActivitySessionTransactionId)</text><path d="M673,307.4219 L673,333.4219 L811,333.4219 L811,317.4219 L801,307.4219 L673,307.4219 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M801,307.4219 L801,317.4219 L811,317.4219 L801,307.4219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="679" y="325.917">条件分支，条件一：</text><polygon fill="#A80036" points="2195.5,360.7734,2205.5,364.7734,2195.5,368.7734,2199.5,364.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1616.5" x2="2201.5" y1="364.7734" y2="364.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1623.5" y="360.2686">/activity/api/activities/activitySessionTransaction/{id}</text><polygon fill="#A80036" points="2383,396.125,2393,400.125,2383,404.125,2387,400.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2207.5" x2="2389" y1="400.125" y2="400.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="2214.5" y="395.6201">findOnePT(id)</text><path d="M2400,378.125 L2400,404.125 L2865,404.125 L2865,388.125 L2855,378.125 L2400,378.125 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2855,378.125 L2855,388.125 L2865,388.125 L2855,378.125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="444" x="2406" y="396.6201">根据activitySessionTransactionId从activity_session_transaction表中获取数据</text><polygon fill="#A80036" points="1627.5,431.4766,1617.5,435.4766,1627.5,439.4766,1623.5,435.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1621.5" x2="2394" y1="435.4766" y2="435.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="1633.5" y="430.9717">return GenericActivitySessionTransactionEntity</text><polygon fill="#A80036" points="831.5,461.8281,821.5,465.8281,831.5,469.8281,827.5,465.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="1615.5" y1="465.8281" y2="465.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="837.5" y="461.3232">return GenericActivitySessionTransactionEntity</text><polygon fill="#A80036" points="1604.5,497.1797,1614.5,501.1797,1604.5,505.1797,1608.5,501.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="820.5" x2="1610.5" y1="501.1797" y2="501.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="699" x="827.5" y="496.6748">if (GamingTableTransactionEntity.getActivitySessionTransactionId()==null)findActivitySession(ActivityId,ActivitySessionId)</text><path d="M673,479.1797 L673,505.1797 L811,505.1797 L811,489.1797 L801,479.1797 L673,479.1797 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M801,479.1797 L801,489.1797 L811,489.1797 L801,479.1797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="679" y="497.6748">条件分支，条件二：</text><polygon fill="#A80036" points="2195.5,532.5313,2205.5,536.5313,2195.5,540.5313,2199.5,536.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1616.5" x2="2201.5" y1="536.5313" y2="536.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="1623.5" y="532.0264">/activity/api/activities/{activityId}/sessions/{sessionId}</text><polygon fill="#A80036" points="2598.5,567.8828,2608.5,571.8828,2598.5,575.8828,2602.5,571.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2207.5" x2="2604.5" y1="571.8828" y2="571.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="2214.5" y="567.3779">findOnePT(sessionid)</text><path d="M2615,549.8828 L2615,575.8828 L2942,575.8828 L2942,559.8828 L2932,549.8828 L2615,549.8828 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2932,549.8828 L2932,559.8828 L2942,559.8828 L2932,549.8828 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="2621" y="568.3779">根据activitySessionId从activity_session表中获取数据</text><polygon fill="#A80036" points="1627.5,603.2344,1617.5,607.2344,1627.5,611.2344,1623.5,607.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1621.5" x2="2609.5" y1="607.2344" y2="607.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="1633.5" y="602.7295">return GenericActivitySessionEntity</text><polygon fill="#A80036" points="831.5,633.5859,821.5,637.5859,831.5,641.5859,827.5,637.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="1615.5" y1="637.5859" y2="637.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="837.5" y="633.0811">return GenericActivitySessionEntity</text><polygon fill="#A80036" points="310.5,668.9375,300.5,672.9375,310.5,676.9375,306.5,672.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="819.5" y1="672.9375" y2="672.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="316.5" y="668.4326">return GenericApiResponse</text><path d="M59,650.9375 L59,676.9375 L290,676.9375 L290,660.9375 L280,650.9375 L59,650.9375 " fill="#FBFB77" filter="url(#fynp822icp1d9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M280,650.9375 L280,660.9375 L290,660.9375 L280,650.9375 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="65" y="669.4326">最后返回封装好数据的 headcountVo</text><!--
@startuml
boundary frontend
box "gems-inventory-composite"
control InventoryMaintenanceController
control InventoryServiceImpl
control ActivityServiceImpl
end box
box "gems-inventory"
control InventoryTransactionController
control InventoryTransactionDetailRepository
end box
box "gems-activity"
control ActivityController
control ActivitySessionTransactionRepository
control ActivitySessionRepository
end box

frontend -> InventoryMaintenanceController: api/tgames/v1/inventory/inventoryMaintenance/tableInventory/headcount/{transactionId}
note left
Menu -> Executive Information Menu
-> Table Inventory Maintenance -> Headcount
end note
InventoryMaintenanceController -> InventoryServiceImpl : findTableTransactionById(transactionId)
InventoryServiceImpl -> InventoryTransactionController : /inventory/api/inventoryTransactions/{transactionId}
InventoryTransactionController -> InventoryTransactionDetailRepository : findOnePT(transactionId)
note right
根据transactionId从表chips_inventory_transaction获取数据
end note
InventoryTransactionDetailRepository -> InventoryServiceImpl : return GamingTableTransactionEntity
InventoryServiceImpl -> InventoryMaintenanceController : return GamingTableTransactionEntity

InventoryMaintenanceController -> ActivityServiceImpl : if (GamingTableTransactionEntity.getActivitySessionTransactionId()!=null)findActivitySessionTransaction(ActivitySessionTransactionId)
note left
条件分支，条件一：
end note
ActivityServiceImpl -> ActivityController : /activity/api/activities/activitySessionTransaction/{id}
ActivityController -> ActivitySessionTransactionRepository : findOnePT(id)
note right
根据activitySessionTransactionId从activity_session_transaction表中获取数据
end note
ActivitySessionTransactionRepository -> ActivityServiceImpl : return GenericActivitySessionTransactionEntity
ActivityServiceImpl -> InventoryMaintenanceController : return GenericActivitySessionTransactionEntity

InventoryMaintenanceController -> ActivityServiceImpl : if (GamingTableTransactionEntity.getActivitySessionTransactionId()==null)findActivitySession(ActivityId,ActivitySessionId)
note left
条件分支，条件二：
end note
ActivityServiceImpl -> ActivityController : /activity/api/activities/{activityId}/sessions/{sessionId}
ActivityController -> ActivitySessionRepository : findOnePT(sessionid)
note right
根据activitySessionId从activity_session表中获取数据
end note
ActivitySessionRepository -> ActivityServiceImpl : return GenericActivitySessionEntity
ActivityServiceImpl -> InventoryMaintenanceController : return GenericActivitySessionEntity


InventoryMaintenanceController -> frontend : return GenericApiResponse
note left
最后返回封装好数据的 headcountVo
end note

@enduml

PlantUML version 1.2018.01(Mon Jan 29 02:08:22 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1024-b11
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>